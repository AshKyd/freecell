/*! mousetrap v1.2.1 craig.is/killing/mice */
(function(){function J(h,i,f){h.addEventListener?h.addEventListener(i,f,!1):h.attachEvent("on"+i,f)}function c(f){return"keypress"==f.type?String.fromCharCode(f.which):Q[f.which]?Q[f.which]:b[f.which]?b[f.which]:String.fromCharCode(f.which).toLowerCase()}function H(h){var h=h||{},i=!1,f;for(f in N){h[f]?i=!0:N[f]=0}i||(M=!1)}function a(r,p,q,n,s){var i,l,k=[],h=q.type;if(!O[r]){return[]}"keyup"==h&&o(r)&&(p=[r]);for(i=0;i<O[r].length;++i){if(l=O[r][i],!(l.seq&&N[l.seq]!=l.level)&&h==l.action&&("keypress"==h&&!q.metaKey&&!q.ctrlKey||p.sort().join(",")===l.modifiers.sort().join(","))){n&&l.combo==s&&O[r].splice(i,1),k.push(l)}}return k}function m(h,i,f){if(!g.stopCallback(i,i.target||i.srcElement,f)&&!1===h(i,f)){i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.returnValue=!1,i.cancelBubble=!0}}function e(i){"number"!==typeof i.which&&(i.which=i.keyCode);var p=c(i);if(p){if("keyup"==i.type&&d==p){d=!1}else{var h=[];i.shiftKey&&h.push("shift");i.altKey&&h.push("alt");i.ctrlKey&&h.push("ctrl");i.metaKey&&h.push("meta");var h=a(p,h,i),n,l={},k=!1;for(n=0;n<h.length;++n){h[n].seq?(k=!0,l[h[n].seq]=1,m(h[n].callback,i,h[n].combo)):!k&&!M&&m(h[n].callback,i,h[n].combo)}i.type==M&&!o(p)&&H(l)}}}function o(f){return"shift"==f||"ctrl"==f||"alt"==f||"meta"==f}function K(h,k,f){if(!f){if(!L){L={};for(var i in Q){95<i&&112>i||Q.hasOwnProperty(i)&&(L[Q[i]]=i)}}f=L[h]?"keydown":"keypress"}"keypress"==f&&k.length&&(f="keydown");return f}function I(w,u,v,t,r){var w=w.replace(/\s+/g," "),q=w.split(" "),s,p,l=[];if(1<q.length){var n=w,k=v;N[n]=0;k||(k=K(q[0],[]));w=function(){M=k;++N[n];clearTimeout(G);G=setTimeout(H,1000)};v=function(f){m(u,f,n);"keyup"!==k&&(d=c(f));setTimeout(H,10)};for(t=0;t<q.length;++t){I(q[t],t<q.length-1?w:v,k,n,t)}}else{p="+"===w?["+"]:w.split("+");for(q=0;q<p.length;++q){s=p[q],F[s]&&(s=F[s]),v&&("keypress"!=v&&j[s])&&(s=j[s],l.push("shift")),o(s)&&l.push(s)}v=K(s,l,v);O[s]||(O[s]=[]);a(s,l,{type:v},!t,w);O[s][t?"unshift":"push"]({callback:u,modifiers:l,action:v,seq:t,level:r,combo:w})}}for(var Q={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},j={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},F={option:"alt",command:"meta","return":"enter",escape:"esc"},L,O={},P={},N={},G,d=!1,M=!1,R=1;20>R;++R){Q[111+R]="f"+R}for(R=0;9>=R;++R){Q[R+96]=R}J(document,"keypress",e);J(document,"keydown",e);J(document,"keyup",e);var g={bind:function(i,n,h){for(var l=i instanceof Array?i:[i],k=0;k<l.length;++k){I(l[k],n,h)}P[i+":"+h]=n;return this},unbind:function(f,h){P[f+":"+h]&&(delete P[f+":"+h],this.bind(f,function(){},h));return this},trigger:function(f,h){P[f+":"+h]();return this},reset:function(){O={};P={};return this},stopCallback:function(f,h){return -1<(" "+h.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==h.tagName||"SELECT"==h.tagName||"TEXTAREA"==h.tagName||h.contentEditable&&"true"==h.contentEditable}};window.Mousetrap=g;"function"===typeof define&&define.amd&&define(g)})();